---
date: 2022-10-24
url: https://codeforces.com/contest/612/problem/E
tags: 
- 来源/CF
- 类型/图论
---


## 题意

给定长度为n的排列$p_i$, 求一个排列$q_i$ 
使得$q_{q_{i}} = p_i$ , 若不存在, 输出 -1

## 思路

定义一个置换$M =  \{q_{1}, q_{2}, ... , q_{n} \}$
则$M^{2} = {p_{1}, .. . , p_{n}  }$

对于一个置换M,  可以写成多个轮换的积, 每个轮换都是一个环

对于奇数环, 再做一次置换, 仍是奇数环

对于偶数环,  再做一次置换, 会分裂成两个环

给定$p_{i}$ 即给定两次置换后, 形成的环

对于奇数环, 逆变换即反过来, 各一个点放一个.
![[Pasted image 20221024125623.png]]
对于偶数环, 选两个大小相同的环合并到一起
![](https://pic4.zhimg.com/80/v2-44c702a59d5e21a10444730f29494247_720w.webp)

## 代码
```cpp
```


- [ ] CF-621E.Square Root of Permutation #todo 
( 是个好题目的话, 记得提炼好放sm里哦 )